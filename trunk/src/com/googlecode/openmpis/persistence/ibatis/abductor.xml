<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Abductor">
    <!-- Type alias allow you to use a shorter name for long fully qualified class names. -->
    <typeAlias alias="abductor" type="com.googlecode.openmpis.dto.Abductor"/>
    
    <cacheModel id="abductorCache" type="LRU">
        <flushOnExecute statement="insertAbductor"/>
        <flushOnExecute statement="updateAbductor"/>
        <flushOnExecute statement="deleteAbductor"/>
        <flushInterval hours="24"/>
    </cacheModel>

    <sql id="abductorColumnsFragment">
        FIRSTNAME as firstName,
        NICKNAME as nickname,
        MIDDLENAME as middleName,
        LASTNAME as lastName,
        BIRTHMONTH as birthMonth,
        BIRTHDAY as birthDay,
        BIRTHYEAR as birthYear,
        STREET as street,
        CITY as city,
        PROVINCE as province,
        COUNTRY as country,
        SEX as sex,
        FEET as feet,
        INCHES as inches,
        WEIGHT as weight,
        RELIGION as religion,
        RACE as race,
        EYECOLOR as eyeColor,
        HAIRCOLOR as hairColor,
        MARKS as marks,
        PERSONALEFFECTS as personalEffects,
        REMARKS as remarks,
        PHOTO as photo,
        AGEDPHOTO as agedPhoto,
        CODISID as codisId,
        AFISID as afisId,
        DENTALID as dentalId
        FROM ABDUCTOR
    </sql>
    
    <!-- Use primitive wrapper type (e.g. Integer) as parameter and allow results to
    be auto-mapped results to Person object (JavaBean) properties -->
    <select id="getAbductorById" parameterClass="java.lang.Integer" resultClass="abductor" cacheModel="abductorCache">
        SELECT
        <include refid="abductorColumnsFragment"/>
        <![CDATA[
        WHERE ID = #id#
        ]]>
    </select>

    <select id="getAllAbductors" parameterClass="java.lang.Integer" resultClass="abductor" cacheModel="abductorCache">
        SELECT
        <include refid="abductorColumnsFragment"/>
        ORDER BY ID
    </select>

    <select id="listAllAbductors" parameterClass="java.lang.Integer" resultClass="abductor" cacheModel="abductorCache">
        SELECT
        <include refid="abductorColumnsFragment"/>
        ORDER BY LASTNAME, FIRSTNAME
    </select>

    <select id="countAllAbductors" resultClass="java.lang.Integer" cacheModel="abductorCache">
        SELECT
        COUNT(ID)
        FROM ABDUCTOR
    </select>

    <select id="checkAbductor" parameterClass="abductor" resultClass="abductor" cacheModel="abductorCache">
        <![CDATA[
        SELECT
        FIRSTNAME as firstName
        FROM ABDUCTOR
        WHERE ID != #id# AND FIRSTNAME = #firstName# AND LASTNAME = #lastName#
        ]]>
    </select>

    <!-- Use Person object (JavaBean) properties as parameters for insert. Each of the
    parameters in the #hash# symbols is a JavaBeans property. -->
    <insert id="insertAbductor" parameterClass="abductor">
        <selectKey type="post" resultClass="int">
            SELECT LAST_INSERT_ID()
        </selectKey>
        <![CDATA[
        INSERT INTO ABDUCTOR
        (FIRSTNAME, NICKNAME, MIDDLENAME, LASTNAME, BIRTHMONTH, BIRTHDAY, BIRTHYEAR,
        STREET, CITY, PROVINCE, COUNTRY, SEX, FEET, INCHES, WEIGHT, RELIGION, RACE,
        EYECOLOR, HAIRCOLOR, MARKS, PERSONALEFFECTS, REMARKS,
        PHOTO, AGEDPHOTO, CODISID, AFISID, DENTALID)
        VALUES
        (#firstName#, #nickname#, #middleName#, #lastName#, #birthMonth#, #birthDay#, #birthYear#,
        #street#, #city#, #province#, #country#, #sex#, #feet#, #inches#, #weight#, #religion#, #race#,
        #eyeColor#, #hairColor#, #marks#, #personalEffects#, #remarks#,
        #photo#, #agedPhoto#, #codisId#, #afisId#, #dentalId#)
        ]]>
    </insert>

    <!-- Use Person object (JavaBean) properties as parameters for update. Each of the
    parameters in the #hash# symbols is a JavaBeans property. -->
    <update id="updateAbductor" parameterClass="abductor">
        <![CDATA[
        UPDATE ABDUCTOR SET
        FIRSTNAME = #firstName#,
        NICKNAME = #nickname#,
        MIDDLENAME = #middleName#,
        LASTNAME = #lastName#,
        BIRTHMONTH = #birthMonth#,
        BIRTHDAY = #birthDay#,
        BIRTHYEAR = #birthYear#,
        STREET = #street#,
        CITY = #city#,
        PROVINCE = #province#,
        COUNTRY = #country#,
        SEX = #sex#,
        FEET = #feet#,
        INCHES = #inches#,
        WEIGHT = #weight#,
        RELIGION = #religion#,
        RACE = #race#,
        EYECOLOR = #eyeColor#,
        HAIRCOLOR = #hairColor#,
        MARKS = #marks#,
        PERSONALEFFECTS = #personalEffects#,
        REMARKS = #remarks#,
        PHOTO = #photo#,
        AGEDPHOTO = #agedPhoto#,
        CODISID = #codisId#,
        AFISID = #afisId#,
        DENTALID = #dentalId#,
        WHERE ID = #id#
        ]]>
    </update>

    <!-- Use Person object (JavaBean) “id” properties as parameters for delete. Each of the
    parameters in the #hash# symbols is a JavaBeans property. -->
    <delete id="deleteAbductor" parameterClass="java.lang.Integer">
        <![CDATA[
        DELETE ABDUCTOR
        WHERE ID = #id#
        ]]>
    </delete>
</sqlMap>