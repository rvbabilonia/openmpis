var _globalScope=this;function Jmaki(){this.version=".9.1";this.debugGlue=false;this.debug=false;var _1=this;var _2=[];var _3=[];this.loaded=false;this.initialized=false;this.webRoot="";this.resourcesRoot="resources";this.Map=function(){var _4={};this.keys=function(){var o={};var _6=[];for(var _i in _4){if(typeof o[_i]=="undefined"){_6.push(_i);}}return _6;};this.put=function(_8,_9){_4[_8]=_9;};this.get=function(_a){return _4[_a];};this.remove=function(_b){delete _4[_b];};this.clear=function(){delete _4;_4={};};};this.attributes=new this.Map();var _c=new this.Map();this.subscribe=function(_d,_l){var _f=_c.get(_d);if(!_f){_f=[];_c.put(_d,_f);}for(var i in _f){if(i==_l){return;}}_f.push(_l);};this.unsubscribe=function(_11,_12){var _13=_c.get(_11);if(_13){for(var i=0;i<_13.length;i++){if(_13[i]==_12){_13.splice(i,1);break;}}}};this.publish=function(_15,_16,_17,_18){if(typeof _15=="undefined"||typeof _16=="undefined"){return;}var _19=_c.get(_15);if(_1.debugGlue){var _me=_16;if(typeof _16=="object"){var _m=[];for(var _o in _16){_m.push(_o+" : "+_16[_o]);}if(_m.length>0){_me="{"+_m.join(" , ")+"}";}else{_me="{}";}}_1.log("<span style='color:red'>Publish </span> : Topic:"+_15+" message: "+_me);}if(!_19){_19=[];_c.put(_15,_19);}for(var _1d=0;_1d<_19.length;_1d++){if(typeof _19[_1d]=="function"){_19[_1d](_16);}}if(_1.debugGlue&&_19.length>0){_1.log("<span style='color:green'>Point to Point Pubish match</span> : Topic:"+_15+" listeners : "+_19.length);}if(_1.config&&_1.config.glue&&_1.config.glue.listeners){for(var _l=0;_l<_1.config.glue.listeners.length;_l++){var _1f=_1.config.glue.listeners[_l];if((_1f.topic instanceof RegExp&&_1f.topic.test(_15))||(_1f.topic==_15)||(typeof _1f.topic.charAt=="function"&&_1f.topic.charAt(_1f.topic.length-1)=="*"&&(_15.indexOf(_1f.topic.substring(0,_1f.topic.length-1))==0)&&_15.substring(0,_1f.topic.length-1)==_1f.topic.substring(0,_1f.topic.length-1))||(typeof _1f.topic.charAt=="function"&&_1f.topic.charAt(0)=="*"&&_15.indexOf(_1f.topic.substring(1,_1f.topic.length)!=-1)&&_15.substring(_15.indexOf(_1f.topic.substring(1,_1f.topic.length)),_15.length)==_1f.topic.substring(1,_1f.topic.length))||(typeof _1f.topic.charAt=="function"&&_1f.topic.charAt(0)=="*"&&_1f.topic.charAt(_1f.topic.length-1)=="*"&&_15.indexOf(_1f.topic.substring(1,_1f.topic.length-1)!=-1))){if(_1.debugGlue){_1.log("<span style='color:green'>Publish Match</span> : Topic:"+_15+" listener: "+_1f);}if(_1f.action=="call"&&_1f.target){var _20;if(_1f.target.functionName){_20=_1.findObject(_1f.target.object);if(typeof _20=="function"){myo=new _20;}else{if(_20){myo=_20;}else{if(_1.debugGlue){_1.log("Publish Error :  Object found: "+_1f.target.object);}}}if(typeof myo!="undefined"&&typeof myo[_1f.target.functionName]=="function"){myo[_1f.target.functionName].call(_globalScope,_16);}else{if(_1.debugGlue){_1.log("Publish Error : function "+_1f.target.functionName+" not found on object "+_1f.target.object);}}}else{if(_1f.target.functionHandler){_1f.target.functionHandler.call(_globalScope,_16);}else{if(_1.debugGlue){_1.log("Publish Error : no fuctionName or functionHandler specified on listener mapped to "+_15);}}}}}else{if(_1.config.glue.listeners[_l].action=="forward"){var _21=_1.config.glue.listeners[_l].topics;for(var ti=0;ti<_21.length;ti++){if(_21[ti]!=_15){_1.publish(_21[ti],_16);}}}}}}var bd=true;if(typeof _17!="undefined"){bd=_17;}if(bd&&window.frames.length>0){for(var i=0;i<window.frames.length;i++){if(window.frames[i].jmaki){window.frames[i].jmaki.publish("/global"+_15,_16,true,false);}}}if(window!=window.top){var bu=true;if(typeof _18!="undefined"){bu=_18;}if(bu&&window.parent.jmaki){window.parent.jmaki.publish("/global"+_15,_16,false,true);}}};this.addLibraries=function(_26,_cb,_28){if(_26.length<=0){if(typeof _cb=="function"){_cb();return;}}if(typeof _28=="undefined"){_28=new _1.Map();}var _29=new Date().getMilliseconds();var _2a=_26[_26.length-1];if(_1.blocked){for(var b=0;b<_1.blocked.length;b++){if(_2a.indexOf(_1.blocked[b])!=-1){return _2a;}}}var _2c="c_script_"+_26.length+"_"+_29;var _2d=document.getElementsByTagName("head")[0];var e=document.createElement("script");e.start=_29;e.id=_2c;e.type="text/javascript";_2d.appendChild(e);var se=document.getElementById(_2c);_28.put(_2c,_2a);var _30=function(_id){var t=document.getElementById(_id);if(t.timeoutHandler){clearInterval(t.timeoutHandler.interval);delete t.timeoutHandler;}var _s=document.getElementById(_id);if(_s){_s.parentNode.removeChild(_s);}_28.remove(_id);var _34=_cb;if(_26.length-1>0){_26.pop();_1.addLibraries(_26,_cb,_28);}if(_28.keys().length==0){if(typeof _cb!="undefined"){var _35=0;delete _28;setTimeout(function(){_34();},0);}}};if(/MSIE/i.test(navigator.userAgent)){se.onreadystatechange=function(){if(this.readyState=="loaded"){var _id=_2c;_30(_id);}};document.getElementById(_2c).src=_2a;}else{if(se.addEventListener){var _37=function(_id){var _c=0;var _3a=this;this.interval=setInterval(function(){if(_c>2){clearInterval(_3a.interval);_30(_id);}else{_c++;}},250);};se.timeoutHandler=new _37(_2c);se.addEventListener("load",function(){var _id=_2c;_30(_id);},true);}setTimeout(function(){document.getElementById(_2c).src=_2a;},0);}se=null;_2d=null;};this.getXHR=function(){if(window.XMLHttpRequest){return new XMLHttpRequest();}else{if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP");}}};this.doAjax=function(_3c){if(typeof _3c=="undefined"||!_3c.url){return;}var _3d=this.getXHR();var _3e="GET";var _3f=true;var _40;if(typeof _3c.asynchronous!="undefined"){_3f=_3c.asynchronous;}if(_3c.method){_3e=_3c.method;}if(typeof _3c.callback=="function"){_40=_3c.callback;}var _41=null;if(_3c.content){_41="";for(var l in _3c.content){if(typeof _3c.content[l]=="string"){_41=_41+l+"="+encodeURIComponent(_3c.content[l])+"&";}}}if(_3f==true){_3d.onreadystatechange=function(){_40(_3d);};}_3d.open(_3e,_3c.url,_3f);if(_3c.method){_3e=_3c.method;if(_3e.toLowerCase()=="post"){_3d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");}}_3d.send(_41);if(_40){return _40(_3d);}};this.addType=function(_43){var _44=null;if(_1.config&&_1.config.types){for(var _i=0;_i<_1.config.types.length;_i++){if(_43==_1.config.types[_i].id){_44=_1.config.types[_i];break;}}if(_44){if(_44.preload){_globalScope.eval(_44.preload);}var _46=[];for(var _i=0;_i<_44.libs.length;_i++){if(!this.isScriptLoaded(this.webRoot+_44.libs[_i])){_46.push(this.webRoot+_44.libs[_i]);}}var _cb;if(_44.postload){_cb=function(){var _49=_44.postload;_globalScope.eval(_49);};}this.addLibraries(_46,_cb);}}};this.addLibrary=function(lib){var se=document.createElement("script");se.src=lib;if(/WebKit/i.test(navigator.userAgent)){document.body.appendChild(se);}else{var _4c=document.getElementsByTagName("head")[0];_4c.appendChild(se);}};this.addWidget=function(_4d){_3.push(_4d);if(this.loaded){this.loadWidget(_4d);}};this.bootstrapWidgets=function(){_1.loaded=true;for(var l=0;l<_3.length;l++){this.loadWidget(_3[l]);}};this.writeScript=function(_s,_id){if(_1.loaded==true){if(document.getElementById(_id)){document.getElementById(_id).innerHTML="Attempt to write a script that can not be dynamically load widget with  id "+_id+". Consider using the widget in an iframe.";}}else{document.write("<script src='"+_s+"'></script>");}};this.loadScript=function(_51){if(!/http/.test(_51)){_51=this.webRoot+_51;}var req=this.getXHR();req.open("GET",_51,false);try{req.send(null);}catch(e){_1.log("error loading : "+_51);}if(req.status==200){return window.eval(req.responseText);}};this.loadStyle=function(_53){var _54=document.createElement("link");_54.type="text/css";_54.rel="stylesheet";if(_53[0]=="/"){_53=_1.webRoot+_53;}_54.href=_53;if(document.getElementsByTagName("head").length==0){var _55=document.createElement("head");document.documentElement.insertBefore(_55,document.documentElement.firstChild);}document.getElementsByTagName("head")[0].appendChild(_54);};this.replaceStyleClass=function(_56,_57,_58){var _59=this.getElementsByStyle(_57,_56);for(var i=0;i<_59.length;i++){if(_59[i].className.indexOf(" ")!=-1){var _5b=_59[i].className.split(" ");for(var ci in _5b){if(_5b[ci]==_57){_5b[ci]=_58;}}_59[i].className=_5b.join(" ");}else{if(_59[i].className==_57){_59[i].className=_58;}}}};this.getElementsByStyle=function(_5d,_5e){var _5f=[];if(typeof _5e!="undefined"){var _60=_5e;if(typeof _5e=="string"){_60=document.getElementById(_5e);}_5f=this.getAllChildren(_60,[]);}else{_5f=(document.all)?document.all:document.getElementsByTagName("*");}var _61=[];for(var i=0;i<_5f.length;i++){if(_5f[i].className.indexOf(" ")!=-1){var cn=_5f[i].className.split(" ");for(var ci=0;ci<cn.length;ci++){if(cn[ci]==_5d){_61.push(_5f[i]);}}}else{if(_5f[i].className==_5d){_61.push(_5f[i]);}}}return _61;};this.getAllChildren=function(_65,_66){var _nc=_65.childNodes;for(var l=0;l<_nc.length;l++){if(_nc[l].nodeType==1){_66.push(_nc[l]);if(_nc[l].childNodes.length>0){this.getAllChildren(_nc[l],_66);}}}return _66;};this.loadWidget=function(_69){if(_1.attributes.get(_69.uuid)!=null){return;}var _6a="jmaki.widgets."+_69.name+".Widget";var con=this.findObject(_6a);if(typeof con!="function"){logError("Could not find widget constructor for: "+_6a+". Please make sure the widget constructor is properly defined.",document.getElementById(_69.uuid));}var _6c;if((typeof _69.value=="string")&&_69.value.indexOf("@{")==0){var _vw=/[^@{].*[^}]/.exec(_69.value);_69.value=_1.findObject(new String(_vw));}var _6e=_69.uuid;if(/MSIE/i.test(navigator.userAgent)){var _6f=_69.uuid;var _70=null;if(window.onerror){_70=window.onerror;}var eh=function(_72,url,_74){var _75=_6f;logWidgetError(_6a,_75,url,_74,_72,document.getElementById(_75));};window.onerror=eh;_6c=new con(_69);window.onerror=null;if(_70){window.onerror=_70;}}else{if(typeof con=="function"){try{_6c=new con(_69);}catch(e){var _76="unknown";var _77=null;if(e.lineNumber){_76=e.lineNumber;}if(e.message){_77=e.message;}if(_1.debug){logWidgetError(_6a,_69.uuid,_69.script,_76,_77,document.getElementById(_69.uuid));return;}}}else{if(typeof con=="undefined"){logError("Unable to find widget constructor "+_6a+" check log and make sure constructor is defined.",document.getElementById(_69.uuid));return;}}}if(typeof _6c=="object"){_1.attributes.put(_69.uuid,_6c);if(_6c.postLoad=="function"){_6c.postLoad();}_1.publish("/jmaki/runtime/widget/loaded",_69);}else{logError("Unable to create an instance of "+_6a+". See the error log for more detials.",document.getElementById(_69.uuid));}};function logWidgetError(_78,_79,url,_7b,_m,div){var _7e="<span>Error loading "+_78+" : id="+_79+"<br>"+"Script: "+url+" (line:"+_7b+")."+"<br>Message: "+_m+"</span>";logError(_7e,div);}function logError(_7f,div){if(div==null||typeof div.className=="undefined"){div=document.createElement("div");document.body.appendChild(div);}div.className="";div.style.color="red";div.innerHTML=_7f;}this.getWidget=function(id){return _1.attributes.get(id);};this.clearWidgets=function(_82){if(typeof _82=="undefined"){var _k=_1.attributes.keys();for(var l=0;l<_k.length;l++){if(typeof _1.attributes.get(_k[l]).destroy!="undefined"&&typeof _1.attributes.get(_k[l]).destroy=="function"){_1.attributes.get(_k[l]).destroy();}_1.attributes.remove(_k[l]);}_1.loaded=false;_3=[];}else{var _ws=_1.getAllChildren(_82,[]);for(var l=0;l<_ws.length;l++){if(_ws[l].id&&_1.attributes.get(_ws[l].id)&&typeof _1.attributes.get(_ws[l].id).destroy=="function"){_1.attributes.get(_ws[l].id).destroy();var _p=document.getElementById(_ws[l].id);_p.parentNode.removeChild(_p);}_1.attributes.remove(_ws[l].id);}}};this.addGlueListener=function(l,t){if(!_1.config){_1.config={};}if(!_1.config.glue){_1.config.glue={};}if(!_1.config.glue.listeners){_1.config.glue.listeners=[];}if(typeof l=="object"&&!(l instanceof RegExp)){if(l.topic){l.topic=l.topic.replace(/^\s+|\s+$/g,"");}if(l.topicRegExp){l.topic=new RegExp(l.topicRegExp);}lis=l;}else{if(typeof t=="string"){lis={};if(l.topicRegExp){lis.topic=new RegExp(l.topicRegExp);}else{lis.topic=l;}lis.target={};var _is=t.split(".");lis.action="call";lis.target.functionName=_is.pop();lis.target.object=_is.join(".");}else{if(typeof t=="function"){lis={};if(l.topicRegExp){lis.topic=new RegExp(l.topicRegExp);}else{lis.topic=l;}lis.target={};lis.action="call";lis.target.functionHandler=t;}else{_1.log("don't know what to do with "+l);}}}if(typeof lis!="undefined"){_1.config.glue.listeners.push(lis);}};this.extend=function(_8b,_8c){_8b.prototype=new _8c();_8b.prototype.constructor=_8b;_8b.superclass=_8c.prototype;for(i in _8c){_8b.prototype[i]=_8c[i];}};this.log=function(_8d,_8e){if(!_1.debug){return;}if(!_1.ld){var ld=document.createElement("div");ld.style.border="1px solid #000000";ld.style.fontSize="12px";ld.style.position="absolute";ld.style.zIndex="999";ld.style.bottom="0px";ld.style.background="yellow";ld.style.right="0px";ld.style.width="400px";ld.style.height="200px";ld.style.overflowY="auto";document.body.appendChild(ld);_1.ld=ld;}var lm=document.createElement("div");lm.innerHTML=_8d;_1.ld.appendChild(lm);};this.initialize=function(){if(!_1.config){_1.config={};}if(!_1.config.glue){_1.config.glue={};}var req=this.getXHR();try{req.open("GET",this.webRoot+this.resourcesRoot+"/config.json",false);req.send(null);}catch(e){}if(req.readyState==4){if(req.status==200){if(req.responseText==""){return;}var obj=eval("("+req.responseText+")");if(obj.config){_1.config.theme=obj.config.theme;if(obj.config.glue.timers){_1.addTimers(obj.config.glue.timers);}if(obj.config.gluelisteners){for(var gl=0;gl<obj.config.glue.listeners.length;gl++){_1.addGlueListener(obj.config.glue.listeners[gl]);}}}}}postInitialize();};var _94=[];this.namespace=function(_95,_96){var _97=_95.split(".");var _98=_globalScope[_97[0]];if(typeof _98=="undefined"){_globalScope[_97[0]]=_98={};}for(var ii=1;ii<_97.length;ii++){if(typeof _98[_97[ii]]!="undefined"){_98=_98[_97[ii]];}else{_98[_97[ii]]={};_98=_98[_97[ii]];}}if(typeof _96=="object"){_98=_96;}return _98;};this.findObject=function(_9a){var _9b=_9a.split(".");var _9c=_globalScope[_9b[0]];var _9d=true;if(typeof _9c!="undefined"){for(var ii=1;ii<_9b.length;ii++){var _lp=_9b[ii];if(_lp.indexOf("()")!=-1){var _ns=_lp.split("()");if(typeof _9c[_ns[0]]=="function"){var _fn=_9c[_ns[0]];return _fn.call(_globalScope);}}if(typeof _9c[_lp]!="undefined"){_9c=_9c[_lp];_9d=true;}else{_9d=false;break;}}if(_9d){return _9c;}}return null;};this.Timer=function(_a2,_a3){var _a4=this;this.args=_a2;var _a5;this.processTopic=function(){for(var ti=0;ti<_a2.topics.length;ti++){_1.publish(_a2.topics[ti],{topic:_a2.topics[ti],type:"timer",src:_a4,timeout:_a2.to});}};this.processCall=function(){if(!_a5){var _a7=_1.findObject(_a2.on);if(typeof _a7=="function"){_a5=new _a7();}else{if(typeof _a7=="object"){_a5=_a7;}}}if((_a5&&typeof _a5=="object")){if(typeof _a5[_a2.fn]=="function"){_a5[_a2.fn]({type:"timer",src:_a4,timeout:_a2.to});}}};this.run=function(){if(_a3){_a4.processCall();}else{_a4.processTopic();}_globalScope.setTimeout(_a4.run,_a2.to);};};this.addTimer=function(_a8){var _a9=[];_a9.push(_a8);this.addTimers(_a9);};this.addTimers=function(_aa){if(typeof _aa!="undefined"){for(var _l=0;_l<_aa.length;_l++){var _ac=_aa[_l];if(_ac.action=="call"&&_ac.target!="undefined"&&_ac.target.object!="undefined"&&_ac.target.functionName!="undefined"&&typeof _ac.timeout!="undefined"){var _ad={on:_ac.target.object,fn:_ac.target.functionName,to:_ac.timeout};var _ae=new _1.Timer(_ad,true);_94.push(_ae);_ae.run();}else{if(_aa[_l].action=="publish"){var _af={topics:_aa[_l].topics,to:_ac.timeout};var _b0=new _1.Timer(_af,false);_94.push(_b0);_b0.run();}}}}};function postInitialize(){if(_1.initialized){return;}else{_1.initialized=true;}_1.publish("/jmaki/runtime/intialized",{});_1.bootstrapWidgets();_1.publish("/jmaki/runtime/widgetsLoaded",{});if(_1.config&&_1.config.theme){var _b1=_1.config.theme;if(!/(^http)/i.test(_b1)){_b1=_1.webRoot+_b1;}_1.loadStyle(_b1);}_1.publish("/jmaki/runtime/loadComplete",{});}this.filter=function(_b2,_b3){if(typeof _b3=="string"){var h=_1.findObject(_b3);return h.call(_globalScope,_b2);}else{if(typeof _b3=="function"){return _b3.call(_globalScope,_b2);}}};this.DContainer=function(_b5){var _b6=this;var _b7;var _b8;var ie=/MSIE/i.test(navigator.userAgent);if(typeof _b5.target=="string"){_b7=_b5.target;_b8=document.getElementById(target);}else{_b7=_b5.target.id;_b8=_b5.target;}if(typeof overflow!="undefined"&&_b8.style.overflow){_b8.style.overflow="true";}var _ba;this.url=null;var _bb=false;var _bc=false;if(_b5.autosize){_bb=true;_bc=true;}var _bd;var _be;this.loadURL=function(_bf){if(typeof _bf!="undefined"){if(typeof _bf=="string"){_b6.url=_bf;}else{if(_bf.url){_b6.url=_bf.url;}}if(_b5.useIframe){_b6.iframe.src=_b6.url;}else{_1.injector.inject({url:_b6.url,injectionPoint:_b8});}}};function getPosition(_e){var pX=0;var pY=0;try{while(_e.offsetParent){pY+=_e.offsetTop;pX+=_e.offsetLeft;_e=_e.offsetParent;}}catch(e){}return {x:pX,y:pY};}this.resize=function(){var pos=getPosition(_b8);if(_bb||_bc){if(!_b8.parentNode){return;}var pos=getPosition(_b8);if(_b8.parentNode.nodeName=="BODY"){if(window.innerHeight){_be=window.innerHeight-pos.y-40;_bd=window.innerWidth-20;}else{var _c5=_b8.parentNode;while(_c5!=null&&(_c5.clientHeight==0||typeof _c5.clientWidth=="undefined")){_c5=_c5.parentNode;}if(_c5==null){_bd=400;}else{_bd=_c5.clientWidth-20;_be=_c5.clientHeight-pos.y-15;}}}else{var _c6=_b8.parentNode;while(_c6!=null&&(_c6.clientHeight==0||typeof _c6.clientWidth=="undefined")){_c6=_c6.parentNode;}if(_c6==null){_bd=400;}else{_bd=_c6.clientWidth;_be=_c6.clientHeight;}}if(_bb){if(_be<0){_be=320;}_b8.style.height=_be+"px";}if(_bc){_b8.style.width=_bd+"px";}}else{_b8.style.width=_bd+"px";_b8.style.height=_be+"px";}if(_be<0){_be=320;}if(_bd<0){_bd=500;}if(_b5.useIframe){if(_b6.iframe){_b6.iframe.style.height=_be+"px";_b6.iframe.style.width=_bd+"px";}}_ba=document.body.clientWidth;};function init(){if(window.attachEvent){window.attachEvent("onresize",layout);}else{if(window.addEventListener){window.addEventListener("resize",layout,true);}}if(_b5.startWidth){_bd=Number(_b5.startWidth);_b8.style.width=_bd+"px";}else{_bd=_b8.clientWidth;_bc=true;}if(_b5.startHeight){_be=Number(_b5.startHeight);}else{_be=_b8.clientHeight;_bb=true;}if(_be<=0){_be=320;}_b8.style.height=_be+"px";if(_b5.useIFrame&&_b6.iframe){_b6.iframe.style.height=_be+"px";}_1.subscribe(_b5.topic,_b6.loadURL);_b6.resize();if(_b5.url&&!_b5.useIframe){_b6.loadURL(_b5.url);}}var _c7=false;var _c8=0;function layout(){if(!ie){_b6.resize();return;}if(_ba!=document.body.clientWidth&&!_c7){if(!_c7){_c7=true;setTimeout(layout,500);}}else{if(_c7&&document.body.clientWidth==_c8){_c7=false;_b6.resize();}else{if(_c7){_c8=document.body.clientWidth;setTimeout(layout,500);}}}}if(_b5.useIframe&&_b5.useIframe==true){var _c9="";if(_b5.url){_c9="src='"+_b5.url+"'";}var _ca="<IFRAME ID='"+_b7+"_iframe' "+_c9+" FRAMEBORDER=0 SCROLLING="+((!_b5.overflow)?"NO":"YES")+"></IFRAME>";_b8.innerHTML=_ca;var _t=setInterval(function(){if(document.getElementById(_b7+"_iframe")){clearInterval(_t);_b6.iframe=document.getElementById(_b7+"_iframe");setTimeout(function(){init();},0);}},5);}else{init();}};this.destroy=function(){if(window.attachEvent){window.dettachEvent("onresize",layout);}else{if(window.addEventListener){window.removeEventListener("resize",layout,true);}}};this.Injector=function(){var _cc=new Date().getMilliseconds();var _cd=this;var _ce=false;var _cf=[];var _d0=[];this.inject=function(_d1){if(_d0.length==0&&!_ce){inject(_d1);}else{_d0.push(_d1);}};function inject(_d2){_ce=true;_1.doAjax({method:"GET",url:_d2.url,asynchronous:false,callback:function(req){if(req.readyState==4){getContent(req.responseText,_d2);var _d4;if(typeof _d2.injectionPoint=="string"){_d4=document.getElementById(_d2.injectionPoint);if(!document.getElementById(_d2.injectionPoint)){var _t=setInterval(function(){if(document.getElementById(_d2.injectionPoint)){clearInterval(_t);_d4=document.getElementById(_d2.injectionPoint);setTimeout(function(){processTask(_d4,_d2);},0);}},25);}else{processTask(_d4,_d2);}}else{processTask(_d2.injectionPoint,_d2);}}}});}function processTask(_d6,_d7){_1.clearWidgets(_d6);var _id="injector_"+_cc;var _d9=_d7.content+"<div id='"+_id+"'></div>";_d6.innerHTML=_d9;var _t=setInterval(function(){if(document.getElementById(_id)){clearInterval(_t);try{_cd.loadScripts(_d7,processNextTask);}catch(e){_d6.innerHTML="<span style='color:red'>"+e.message+"</span>";}}},25);}function processNextTask(){if(_d0.length>0){var _t=_d0.shift();inject(_t);}_ce=false;}this.get=function(p){var _dd;_1.doAjax({method:"GET",url:p.url,asynchronous:false,callback:function(req){_dd=getContent(req.responseText);}});return _dd;};function getContent(_df,_e0){_e0.embeddedScripts=[];_e0.embeddedStyles=[];_e0.scriptReferences=[];_e0.styleReferences=[];var _t=_df;var _e2="";var _e3=document.getElementsByTagName("script");var _e4=document.getElementsByTagName("link");while(_t.indexOf("<script")!=-1){var _e5=_t.indexOf("<script");var _e6=_t.indexOf("src=",(_e5));var _e7=_t.indexOf(">",_e5);var end=_t.indexOf("</script>",(_e5))+"</script>".length;if(_e5!=-1&&_e6!=-1){var _e9;var _ea=_e6+5;var _eb=_t.substring(_e6+4,(_e6+5));var _ec=_t.indexOf("\"",(_ea+1));_ec=_t.indexOf(_eb,(_ea+1));if(_e6<_e7){_e9=_t.substring(_ea,_ec);var _ed=false;for(var i=0;i<_e3.length;i++){if(typeof _e3[i].src){if(_e3[i].src==_e9){_ed=true;break;}}}if(!_ed){_e0.scriptReferences.push(_e9);}}}var _ef=_e7+1;var _f0=_t.substring(_ef,end-"</script>".length);if(_f0.length>0){_e0.embeddedScripts.push(_f0);}_t=_t.substring(0,_e5)+_t.substring(end,_t.length);_ec=-1;}while(_t.indexOf("<style")!=-1){var _f1=_t.indexOf("<style");var _f2=_t.indexOf(">",_f1);var end=_t.indexOf("</style>",(_f1));var _f4=_f2+1;var _f5=_t.substring(_f4,end);if(_f5.length>0){_e0.embeddedStyles.push(_f5);}_t=_t.substring(0,_f1)+_t.substring(end+"</style>".length,_t.length);}while(_t.indexOf("<link")!=-1){var _f6=_t.indexOf("<link");var _f7=_t.indexOf("href=",(_f6));var _f8=_t.indexOf(">",_f6)+1;if(_f6!=-1&&_f7!=-1){var _f9;var _fa=_f7+6;var _fb=_t.substring(_f7+5,(_f7+6));var _fc=_t.indexOf(_fb,(_fa+1));if(_f7<_f8){styleSourceName=_t.substring(_fa,_fc);var _fd=false;for(var i=0;i<_e4.length;i++){if(typeof _e4[i].src!="undefined"){if(_e4[i].src==styleSourceName){_fd=true;}}}if(!_fd){_e0.styleReferences.push(styleSourceName);}}_t=_t.substring(0,_f6)+_t.substring(_f8,_t.length);}}var _ff=document.getElementsByTagName("head")[0];for(var loop=0;loop<_e0.styleReferences.length;loop++){var link=document.createElement("link");link.href=_e0.styleReferences[loop];link.type="text/css";link.rel="stylesheet";_ff.appendChild(link);}var _102;if(_e0.embeddedStyles.length>0){_102=document.createElement("style");_102.type="text/css";var _103;for(var loop=0;loop<_e0.embeddedStyles.length;loop++){_103=_103+_e0.embeddedStyles[loop];}if(document.styleSheets[0].cssText){document.styleSheets[0].cssText=document.styleSheets[0].cssText+_103;}else{_102.appendChild(document.createTextNode(_103));_ff.appendChild(_102);}}_e0.content=_t;}this.loadScripts=function(task,_106){var _107=function(){for(var loop=0;loop<task.embeddedScripts.length;loop++){var _109=task.embeddedScripts[loop];eval(_109);if(loop==(task.embeddedScripts.length-1)){if(typeof _106!="undefined"){_106();}return;}}if(task.embeddedScripts.length==0&&typeof _106!="undefined"){_106();}};if(task.scriptReferences.length>0){return this.addLibraries(task.scriptReferences.reverse(),_107);}else{_107();}return true;};this.addLibraries=function(_10a,_cb,_10c){if(typeof _10c=="undefined"){_10c=new _1.Map();}var _lib=_10a[_10a.length-1];return _1.addLibraries(_10a,_cb,_10c);};};this.injector=new this.Injector();}if(!jmaki){var jmaki=new Jmaki();jmaki.widgets={};var oldLoad=window.onload;window.onload=function(){if(!jmaki.initialized){jmaki.initialize();}else{jmaki.bootstrapWidgets();return;}if(typeof oldLoad=="function"){oldLoad();}};}